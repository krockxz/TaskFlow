# ============================================================================
# ENVIRONMENT VARIABLE VALIDATION
# ============================================================================
# The application validates all required environment variables at startup.
# Missing or invalid variables will cause the application to fail with clear error messages.
#
# All required (*) variables must be set before running the application.
# Optional variables have sensible defaults documented below.

# ============================================================================
# SUPABASE CONFIGURATION
# ============================================================================
# Get these from: Supabase Dashboard → Settings → API
# Required: (*) - Must be set for application to run
NEXT_PUBLIC_SUPABASE_URL=https://your-project.supabase.co  # (*)
NEXT_PUBLIC_SUPABASE_ANON_KEY=your-anon-key-here  # (*)

# ============================================================================
# DATABASE CONNECTION STRINGS
# ============================================================================
# CRITICAL: These are TWO DIFFERENT URLs for different purposes
# Required: (*) - Must be set for application to run

# DATABASE_URL - Transaction Pooler (port 6543)
# Purpose: Server Actions, API routes, app queries
# Provider: Pgbouncer in Transaction mode
# Connection type: Short-lived, high-concurrency
# Get from: Supabase Dashboard → Database → Connection String → Transaction mode
# Format: postgresql://postgres.PROJECT_ID:PASSWORD@aws-0-REGION.pooler.supabase.com:6543/postgres
DATABASE_URL="postgresql://postgres.PROJECT_ID:PASSWORD@aws-0-REGION.pooler.supabase.com:6543/postgres?pgbouncer=true"  # (*)

# DIRECT_URL - Direct Connection (port 5432)
# Purpose: Prisma migrations ONLY (npx prisma db push/reset)
# Provider: Direct PostgreSQL connection
# Connection type: Long-lived, stable
# Get from: Supabase Dashboard → Database → Connection String → Session mode
# Format: postgresql://postgres:PASSWORD@db.REF.supabase.co:5432/postgres
DIRECT_URL="postgresql://postgres:PASSWORD@db.REF.supabase.co:5432/postgres"  # (*)

# ============================================================================
# SUPABASE SERVICE ROLE KEY
# ============================================================================
# Supabase service role key for server-side operations
# Get from: Supabase Dashboard → Settings → API
# IMPORTANT: This key bypasses RLS policies. NEVER expose to clients.
SUPABASE_SERVICE_ROLE_KEY=your-service-role-key-here

# ============================================================================
# GITHUB INTEGRATION
# ============================================================================
# GitHub webhook secret for signature verification
# Get from: GitHub Repository → Settings → Webhooks → Secret
# IMPORTANT: This must match the secret configured in your GitHub webhook
GITHUB_WEBHOOK_SECRET=your-webhook-secret-here

# Encryption key for sensitive data (GitHub tokens, etc.)
# Generate with: openssl rand -base64 32
# Must be 32+ bytes for AES-256-GCM encryption
ENCRYPTION_KEY=your-32-byte-encryption-key-here

# ============================================================================
# AI FEATURES
# ============================================================================
# Google Gemini API key for AI-powered Shift Brief generation
# Get from: Google AI Studio → Create API Key
# IMPORTANT: This is optional. The app works without it, but Shift Brief
# features will be disabled. Only used for server-side AI generation with
# Gemini 2.5 Flash Lite model.
GEMINI_API_KEY=your-gemini-api-key-here

# ============================================================================
# SLACK INTEGRATION (OPTIONAL)
# ============================================================================
# Slack OAuth credentials for Slack integration
# Get from: Slack App Dashboard → Basic Information → App Credentials
# IMPORTANT: These are optional. The app works without Slack integration.
SLACK_CLIENT_ID=your-slack-client-id-here
SLACK_CLIENT_SECRET=your-slack-client-secret-here
SLACK_SIGNING_SECRET=your-slack-signing-secret-here

# ============================================================================
# OPTIONAL CONFIGURATION
# ============================================================================
# App URL (for production deployments)
# Defaults to http://localhost:3000 if not set
NEXT_PUBLIC_APP_URL=http://localhost:3000

# Node environment
# Defaults to 'development' if not set
NODE_ENV=development

# ============================================================================
# TROUBLESHOOTING
# ============================================================================
# If you see "Environment variables validation failed" at startup:
# 1. Check that all (*) variables above are set
# 2. Verify URLs are valid (use https:// for Supabase URLs)
# 3. For DATABASE_URL, ensure port is 6543 (pooler), not 5432
# 4. For DIRECT_URL, ensure port is 5432 (direct), not 6543
